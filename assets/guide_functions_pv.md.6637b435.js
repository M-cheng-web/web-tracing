import{_ as t,o as s,c as a,U as n}from"./chunks/framework.caeb0c25.js";const h=JSON.parse('{"title":"Pv","description":"","frontmatter":{},"headers":[],"relativePath":"guide/functions/pv.md","filePath":"guide/functions/pv.md","lastUpdated":1692626922000}'),e={name:"guide/functions/pv.md"},l=n(`<h1 id="pv" tabindex="-1">Pv <a class="header-anchor" href="#pv" aria-label="Permalink to &quot;Pv&quot;">​</a></h1><p>采集页面跳转的数据,主要原理是劫持<code>history.pushState history.replaceState</code>,以及监听<code>popstate hashchange</code>这两个事件</p><p>触发事件时生成的对象</p><table><thead><tr><th>属性名称</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td>eventId</td><td>根据时间戳计算得来的字符 (固定为pageId)</td><td>事件ID</td></tr><tr><td>eventType</td><td>pv</td><td>事件类型</td></tr><tr><td>triggerPageUrl</td><td></td><td>当前页面URL</td></tr><tr><td>referer</td><td></td><td>上级页面URL</td></tr><tr><td>title</td><td>document.title</td><td>页面标题</td></tr><tr><td>sendTime</td><td></td><td>发送时间</td></tr><tr><td>triggerTime</td><td></td><td>事件发生时间</td></tr><tr><td>action</td><td>navigate / reload / back_forward / reserved</td><td>页面加载来源</td></tr></tbody></table><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 真实场景产生的事件对象</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">eventType</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pv</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">eventId</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">134b23f7-56a67609-802eb5fc1a34fde9</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">triggerPageUrl</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:6656/#/pv</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">referer</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://localhost:6656/#/err</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">example-vue2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">action</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">navigation</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">triggerTime</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1689728946196</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">sendTime</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1689728947199</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="action-字段解释" tabindex="-1">action 字段解释 <a class="header-anchor" href="#action-字段解释" aria-label="Permalink to &quot;action 字段解释&quot;">​</a></h2><ul><li>navigate - 网页通过点击链接,地址栏输入,表单提交,脚本操作等方式加载</li><li>reload - 网页通过“重新加载”按钮或者location.reload()方法加载</li><li>back_forward - 网页通过“前进”或“后退”按钮加载</li><li>reserved - 任何其他来源的加载</li></ul><h2 id="页面停留时间捕获" tabindex="-1">页面停留时间捕获 <a class="header-anchor" href="#页面停留时间捕获" aria-label="Permalink to &quot;页面停留时间捕获&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>在每次跳转到新的页面时都会触发两个事件，分别为 pv 跳转页面事件、pv-duration 页面停留事件</p><p>上面讲的是pv事件，而这里讲重点讲一下 pv-duration 事件</p></div><p>首先其触发时生成的对象格式为</p><table><thead><tr><th>属性名称</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td>eventId</td><td>根据时间戳计算得来的字符 (固定为pageId)</td><td>事件ID</td></tr><tr><td>eventType</td><td>pv-duration</td><td>事件类型</td></tr><tr><td>triggerPageUrl</td><td></td><td>当前页面URL(也就是在哪个页面发生的停留)</td></tr><tr><td>referer</td><td></td><td>上级页面URL(停留页面的上一张页面)</td></tr><tr><td>title</td><td>document.title</td><td>页面标题</td></tr><tr><td>durationTime</td><td></td><td>页面具体停留的时间</td></tr><tr><td>sendTime</td><td></td><td>发送时间</td></tr><tr><td>triggerTime</td><td></td><td>事件发生时间</td></tr><tr><td>action</td><td>navigate / reload / back_forward / reserved</td><td>页面加载来源</td></tr></tbody></table>`,11),o=[l];function p(r,d,c,i,F,y){return s(),a("div",null,o)}const v=t(e,[["render",p]]);export{h as __pageData,v as default};
